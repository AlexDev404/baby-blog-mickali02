<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Week 5 - Life in Advance Database</title>
    <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
    <header>
        <div class="logo">
            <a href="/">MICKALI GARBUTT</a>
        </div>
    </header>

        <!-- Navigation Bar -->
        <nav>
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="week1.html">Week 1</a></li>
                <li><a href="week2.html">Week 2</a></li>
                <li><a href="week3.html">Week 3</a></li>
                <li><a href="week4.html">Week 4</a></li>
                <li><a href="week5.html">Week 5</a></li>
            </ul>
        </nav>
    
        <main>
            <h1>Week 5</h1>
            <p>In Week 5, we focused on configuring our Go web application and 
                setting up the project structure. We learned about command line 
                flags, which allow for runtime configuration changes, enabling 
                different setups for development, testing, and production environments. 
                The project setup involved creating a directory, initializing Git and a 
                Go module, and setting up necessary files, including a simple "Hello, World!" 
                application. We implemented a basic web server using the http package and 
                established routing with http.NewServeMux(), along with command line flag 
                implementation for customizable network addresses. Additionally, we introduced 
                structured logging using log/slog, enhancing our application's logging capabilities
                by allowing for concurrency-safe logs that can be redirected to a file. Lastly, we 
                completed self-assessment tasks that involved adding logging middleware and exploring
                various logging options for our web application.

            </p>
            <pre>
                <code>
                // Filename: main.go
                package main
                
                import (
                    "flag"
                    "log/slog"
                    // "log"
                    "net/http"
                    "os"
                )
                
                // A handler function named 'home'
                func home(w http.ResponseWriter, r *http.Request) {
                    w.Write([]byte("Hello from UBIT newsletter "))
                }
                
                func main() {
                    addr := flag.String("addr", ":4000", "HTTP network address")
                    // retrieve the command line arguments
                    flag.Parse()
                
                    // Create a new structured logger
                    logger := slog.New(slog.NewTextHandler(os.Stdout, nil))
                
                    // mux is our router
                    mux := http.NewServeMux()
                    // the route pattern/endpoint/URL path
                    mux.HandleFunc("/", home)
                
                    // Use the logger. Note the key:value pair
                    logger.Info("starting server ", "addr", *addr)
                    err := http.ListenAndServe(*addr, mux)
                    //log.Printf("starting server on %s", *addr)
                    // Use the logger. Note the error level
                    logger.Error(err.Error())
                    os.Exit(1)
                }
                </code>
            </pre>                
                <p>Key topics included:</p>
                <ul>
                    <li>Go Web Application Configuration & Project Structure</li>
                    <li>Command Line Flags in Go</li>
                    <li>Building a Basic Web Server</li>
                    <li>Structured Logging in Go</li>
                    <li>Self-Assessment Tasks</li>
                </ul>
        </main>
    </body>
    </html>